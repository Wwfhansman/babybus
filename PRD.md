# 小说生成漫画应用 PRD

## 模块总览
| 模块 | 子模块 | 功能点 | 说明/规则 |
|---|---|---|---|
| 核心漫画生成模块 | 小说输入区 | 文章选择分级板块 | 采用三级分级显示：<br>• 第一级（小说层）：展示本地存储的所有小说列表，每个小说条目右侧有「设置」按钮；<br>• 第二级（章节层）：点击某本小说后，展开其下所有章节列表（由文件自动区分或用户创建）；<br>• 第三级（内容层）：点击某章节后，显示该章节完整文本，底部有「生成漫画」按钮（仅在此级触发生成，生成内容基于当前章节）。<br>第一级小说层操作：<br>• 「+ 上传新小说」支持两种方式：文本输入（仅 5000 字以下，自动创建单章节小说）、文件导入（5000 字以上仅支持 TXT，自动按章节标题拆分）；<br>• 小说条目右侧「设置」按钮：弹出“小说角色配置”弹窗，需输入角色名（必填）、上传角色效果图（PNG/JPG，单张≤500KB，支持 1 张/角色），配置后该小说所有章节生成漫画时优先匹配此角色形象。<br>存储规则：<br>• 所有小说文本默认存储在本地文件夹（用户可在软件设置中修改存储路径）；<br>• 前端实现分级展示逻辑，不上传小说文本到云端；<br>• 仅生成漫画时，后端仅接收当前章节的必要提示片段（如分镜描述、角色配置），不传输完整章节文本。 |
| 核心漫画生成模块 | 小说输入区 | 文本粘贴 / 文件上传（整合） | 文本粘贴：仅在“上传新小说-文本输入”模式下支持，文本框实时显示字数，5000 字以上禁止粘贴并提示“请通过 TXT 文件导入”。<br>文件上传：仅在“上传新小说-文件导入”模式下支持，5000 字以下支持 TXT/PDF/Word（.doc/.docx），5000 字以上仅支持 TXT；文件大小上限 10MB，超出提示“文件过大，请拆分后导入”。<br>文本处理：上传后自动提取纯文本（剔除图片/表格），5000 字以上 TXT 自动拆分章节，拆分规则可手动调整（如手动添加/删除章节分割线）。 |
| 核心漫画生成模块 | 设定编辑区 | 分镜内容展示 | 点击第三级（内容层）「生成漫画」按钮后，后端 LLM 返回解析结果，设定编辑区仅展示“分镜内容”单一板块，无角色形象编辑功能（角色形象由第一级小说「设置」中配置）。<br>分镜内容按序号排列，每话展示“分镜台词”+“分镜场景描述”：<br>• 分镜台词：提取章节文本中的对话内容，标注说话角色（基于小说角色配置匹配）；<br>• 分镜场景描述：通俗化表述场景与角色动作（如“分镜 1：客厅内，男主递信给女主，女主惊讶接信”），避免专业术语。<br>支持修改分镜台词与场景描述（直接点击文本框编辑），不支持新增/删除分镜（分镜数量由章节字数自动匹配）。 |
| 核心漫画生成模块 | 设定编辑区 | 排版模板选择 | 设定编辑区底部新增“排版模板选择”栏，提供 4 类模板：<br>• 横版多格（6 格/页，适配公众号）；<br>• 竖版条漫（4 格梯形/页，适配短视频）。<br>选中模板后显示预览图，标注每格尺寸（如竖版：1080×1920px），模板选择后不可修改（需返回重新生成）。 |
| 核心漫画生成模块 | 漫画生成与输出区 | 生成中互动（小游戏） | 点击设定编辑区「确认生成」按钮后，页面立即灰屏，弹出益智小游戏窗口（类型待定，如拼图/消消乐/数独；难度简单级，单局时长 5-10 分钟，匹配漫画平均生成时间）。<br>交互规则：<br>• 生成期间小游戏窗口无法关闭，用户需通过玩游戏等待生成完成，不能返回前序页面；<br>• 生成完成后，系统自动关闭小游戏窗口，灰屏解除，显示生成后的完整漫画；<br>• 若生成失败（如网络错误、提示片段解析异常），小游戏窗口弹出失败提示（如“生成超时，请检查网络后重试”），用户可点击“重新生成”再次触发流程，或点击“返回”退出到第三级（内容层）。 |
| 核心漫画生成模块 | 漫画生成与输出区 | 多格式导出与分享 | 生成完成后，支持 3 类格式导出：<br>• 漫画专用：PDF（合并分镜）、CBZ（适配阅读软件）；<br>• 图片：PNG/JPG（单张/批量，分辨率 720P/1080P 可选）；<br>• 短视频：MP4（分镜连贯播放，速度 0.5x-2x，支持添加背景音：提供 3 种默认音效或上传本地音频）。<br>导出时可选择“添加水印”（默认账号名，居中 50% 透明度），水印内容支持自定义（如输入小说名 + 章节号）。<br>一键分享到微信/QQ/钉钉，跳转聊天窗口直接发送导出文件，不支持生成分享链接（避免非授权传播）。 |

## 二、个人中心模块
| 模块 | 子模块 | 功能点 | 说明/规则 |
|---|---|---|---|
| 个人中心模块 | 账号管理 | 基础信息设置 | 显示头像、昵称、账号 ID（不可改），支持上传头像（PNG/JPG，≤200KB）、修改昵称（每 30 天 1 次）。<br>提供“软件设置”入口：可修改本地小说存储路径、默认导出格式、水印样式（如位置、透明度）。<br>提供“账号安全”选项：修改密码（需验证原密码）、绑定手机号（用于找回密码）。<br>支持退出登录，退出前提示“是否保存当前未导出的漫画”。 |
| 个人中心模块 | 账号管理 | 会员与付费管理 | 显示当前会员等级（基础版/专业版/企业版）、有效期、剩余生成次数（基础版：每月 10 次，专业版：无限次）。<br>提供“会员升级”入口，展示各版本价格（如专业版 899 元/年）、权益对比（如专业版支持无限制章节生成、多格式导出），点击跳转支付（微信/支付宝）。<br>显示历史订单（订单号、项目、金额、时间），支持导出订单凭证（PDF）。 |
| 个人中心模块 | 作品管理 | 历史作品库 | 按生成时间倒序展示作品，每个作品标注关联的“小说名-章节名”“排版模板类型”，显示漫画缩略图。<br>支持按“小说名”筛选作品（下拉选择本地存储的小说，筛选对应章节生成的所有漫画）。<br>支持按生成时间搜索。<br>作品提供“再次导出”“删除”功能，删除后 30 天可在“回收站”恢复，不支持“重新编辑”（需返回对应章节重新生成）。 |
| 个人中心模块 | 作品管理 | 作品收藏与分享 | 点击作品旁“星星”图标收藏，收藏内容在“我的收藏”单独展示，标注关联的小说与章节。<br>支持一键分享到微信/QQ/钉钉，仅可分享导出后的文件（如 PNG/PDF/MP4），不支持生成分享链接。<br>记录分享次数（按分享成功次数统计），显示在作品详情页。 |

## 三、素材库模块
| 模块 | 子模块 | 功能点 | 说明/规则 |
|---|---|---|---|
| 素材库模块 | 角色素材库 | 小说专属角色库 | 存储所有小说在「设置」中配置的角色形象，按“小说名-角色名”分级展示，显示角色效果图缩略图。<br>支持角色形象复用：在某本小说的「设置」中，可点击“从其他小说导入角色”，选择已配置的角色形象，修改后应用到当前小说。<br>支持导出角色效果图原图，不支持批量导出（避免本地存储冗余）。 |
| 素材库模块 | 角色素材库 | 公共角色模板 | 提供 10+ 类通用角色模板（古风男主、现代女主、科幻反派等），每个模板含 1 张参考图 + 基础特征描述（如“古风男主：长发束冠，青衫”）。<br>支持“一键添加到小说角色配置”：在某本小说的「设置」中，可选择公共模板，直接作为该小说角色形象（支持后续修改参考图）。<br>每月更新 2-3 个新模板（如节日限定：圣诞风格、新年风格），标注“新”字提示。 |
| 素材库模块 | 场景与排版素材库 | 场景素材模板 | 按场景类型分类（都市：客厅/办公室；古风：客栈/皇宫；科幻：飞船/实验室），每个场景含 3-5 张参考图。<br>场景模板仅用于辅助后端 LLM 生成分镜背景，用户不可手动关联（由 LLM 根据分镜场景描述自动匹配）。<br>支持用户上传自定义场景模板：点击“+ 上传场景”，输入场景名称（如“现代简约卧室”）、上传参考图（1-3 张），保存到“个人场景库”，LLM 优先匹配个人场景库中的模板。 |
| 素材库模块 | 场景与排版素材库 | 排版模板库 | 除核心模块中的 4 类基础模板外，补充行业专属模板：<br>• 小说平台推文模板：含“小说标题 + 作者名 + 章节号”顶部区域；<br>• 短视频模板：含底部“话题标签区”（如 #小说漫画化 #XX 小说）。<br>模板标注适用平台（微信公众号/抖音/微博/小红书），方便用户在设定编辑区选择。<br>支持收藏常用模板，收藏后在设定编辑区“排版模板选择”栏优先显示。 |

## 四、帮助与支持模块
| 模块 | 子模块 | 功能点 | 说明/规则 |
|---|---|---|---|
| 帮助与支持模块 | 使用指导 | 新手教程 | 新用户首次登录时，自动弹出引导弹窗，按“上传小说→配置角色→选择章节→生成漫画”流程分步引导，每步有“下一步”“跳过”按钮。<br>提供“完整教程”入口，跳转至内置教程页面（含图文 + 30 秒短视频，重点讲解“小说分级管理”“角色配置”“生成时小游戏交互”）。<br>教程页面支持搜索（如“如何拆分小说章节”“如何配置角色形象”），快速定位内容。 |
| 帮助与支持模块 | 使用指导 | 常见问题（FAQ） | 按“小说管理”“角色配置”“生成问题”“导出问题”“付费问题”分类，每个问题显示“问题标题 + 展开查看答案”。<br>高频问题（如“TXT 导入后如何调整章节拆分”“生成时小游戏能否跳过”“小说文本是否会上传云端”）置顶显示，标注“高频”。<br>支持用户反馈新问题：点击“我要提问”，填写问题描述（必填）、上传截图（可选），提交后 1 个工作日内通过站内信回复。 |
| 帮助与支持模块 | 反馈与更新 | 用户反馈 | 提供“功能建议”“BUG 反馈”两个反馈入口：<br>• 功能建议：用户可描述希望新增的功能（如“希望支持多章节批量生成”“希望增加 XX 类型小游戏”），提交后可查看其他用户的建议并点赞（点赞数高的建议优先迭代）；<br>• BUG 反馈：需填写问题场景（如“TXT 导入后章节拆分错误”“生成完成后小游戏不关闭”）、操作步骤、上传截图，后台自动收集设备信息（如系统版本、软件版本）。<br>反馈后显示“反馈编号”，用户可通过编号在“反馈进度”页面查询处理状态（待处理/处理中/已解决）。 |
| 帮助与支持模块 | 反馈与更新 | 版本更新 | 软件启动时自动检测版本，有更新时弹出提示（显示更新内容、安装包大小），支持“立即更新”“稍后更新”。<br>提供“历史更新记录”页面，按版本号倒序显示，每个版本标注“重要更新”“普通更新”，并列出更新内容（如“V1.3.0：新增小说分级管理，支持 TXT 自动拆分章节；优化生成时小游戏交互”）。<br>支持“回退版本”：若新版本有问题，可下载最近 1 个旧版本（仅保留 3 个历史版本），回退前提示“是否备份本地小说与作品”。 |